If NOT EXISTS (SELECT database_id FROM sys.databases WHERE Name = 'VoterFileConnection')
BEGIN
CREATE DATABASE VoterFileConnection;
END
GO


USE VoterFileConnection;

IF  NOT EXISTS (SELECT * FROM sys.objects 
WHERE object_id = OBJECT_ID(N'[dbo].[Members]') AND type in (N'U'))
BEGIN

CREATE TABLE [Members] (
    [MemberID] [int] NOT NULL IDENTITY,
    [FMEAID] [int] NOT NULL,
    [FirstName] [nvarchar](max),
    [LastName] [nvarchar](max),
    [HomeCounty] [nvarchar](max),
    [HomeCity] [nvarchar](max),
    [HomeEmail] [nvarchar](max),
    [RegisteredTovote] [bit] NOT NULL,
    [Party] [nvarchar](max),
    [VoterID] [int],
    [TotalVotes] [int],
    [FirstElection] [datetime],
    [LastElection] [datetime],
    CONSTRAINT [PK_dbo.Members] PRIMARY KEY ([MemberID])
)
CREATE TABLE [Votes] (
    [Id] [int] NOT NULL IDENTITY,
    [VoterID] [int] NOT NULL,
    [ElectionDate] [datetime] NOT NULL,
    [ElectionType] [nvarchar](max),
    [VoteType] [nvarchar](max),
    [MemberID] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Votes] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_MemberID] ON [Votes]([MemberID])
ALTER TABLE [dbo].[Votes] ADD CONSTRAINT [FK_dbo.Votes_dbo.Members_MemberID] FOREIGN KEY ([MemberID]) REFERENCES [dbo].[Members] ([MemberID]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)

INSERT [__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201603291717145_InitialCreate', N'VoterFileAnalyzer.Migrations.Configuration',  0x1F8B0800000000000400D55ACD6EE33610BE17E83B083AB545D64AB29736B077917592D6E8E607B137E86DC14863872845AA2215D82DFA643DF491FA0A1DEA5FA46C4B76E26D914B4C72BE190E67869CCFFEE7AFBF87EF9721739E219654F0917B3238761DE0BE08285F8CDC44CDDF7CEFBE7FF7F557C3CB205C3A0FC5BAB77A1D4A7239729F948ACE3C4FFA4F10123908A91F0B29E66AE08BD02381F04E8F8F7FF04E4E3C400817B11C67789F704543483FE0C7B1E03E442A21EC5A04C0643E8E33D314D5B92121C888F830721F8482F88A3238E784AD7E87D875CE192568C814D8DC7508E7421185669E7D923055B1E08B69840384CD5611E0BA39611272F3CFAAE55D77727CAA77E2558205949F4825C29E80276F73D778A6F84E0E764BD7A1F32ED1C96AA5779D3A70E45E43F8A81D66AA3A1BB3582F6BF1EE20933972AC99A3321C306AF4DF91334E984A62187148544CD89173973C32EAFF0CAB99F815F888278CD52D441B71AE31804377B1882056AB7B9837EC9E5CB88ED794F64CF152D892CCF637E1EAEDA9EBDCA021E49141190C355F4C9588E147E0101305C11D51B86F3CCB4900A93B2D1B0C8D57D797E7DBF56DC1A0B154FADF0206C31813D275AEC9F223F0857AC29D91A5EB5CD12504C5480EFD8953CC5F145271B255D3477220453F8910C602D37E751855F4408A2E4342D9AB6BBA870595188710CCC4332662A1F083100C08EF1D6077243E807FD29261E5C2669919A621D382B297589A31970CFCAC7266921798C0331A764A82CEB237E4992ED24AD1B25B34FA1E583A2B9F6894DD49033DF3B9A8BD57B108EF05CB05F2E1CF33122F40A17261CF4D4512FB862143AF2AEE1B4BFE431A2D7D0ABE1EF9B2E57E12F42FF45AE65025BE3DAE7BA66011703AD0ECA0DB114CC31C24AD0FA2A8EBE5DD35438B14DC2D458B346C4BD1227DBBA4E8B994C2A7A901358716CA9B5BB9E481B3C192CCFD85FD7802989034C21444B523F73BCB33ED7065EDA9E00A4F34014F5C33776FF9053050E09CFBD98B774CA44F02FB4CD017417304D31DEF33AEDFE5F8FC9758402857766DA0DCA71161EBCD36447ABD1FB561A50A73E60222E0BA22AC3F817D75972A0C676DF3CDD0AB05915DFE5146A104C4F57AA56BB99E80A56AB90FB055CAAF0499E7A619391A780AAAB12BBCEEAA183742C70ABD26407E5B5AE259201BC2B5DD3611CA94ADAD68C968D3F19BD3AA34B5B4D23AB9CD89540328FD64E643734B2D65A33CC4AA19F6B26EB8E89ABD356DF3F09A441156E45A1B9D8F38D3AC871EBF99F6EF2EC30CC3F3654B93595A5B6AC22B962CC09845D56869FA58C3BB8E3C125DBEC741682DB342764D3415EA9A51691F571165C57AFDBF911C46C7DB92DCB9F0156E2CD475217D4658876D0BA63C0661245E7BBF8D054B42BEAD60AC472A9ACE3A4E31D603A56A3B1B40D57077ACAAB1AC4355A3DD91EA9D631DAB3EDE138DB662B5BCFCB621E5DD9F09950F77C7B2FBBB3AA43DDB1D39EFF4EA70F950778CF2BD5B472907BBE3D47BBB3A547DBC67B4566D9B15B1D554BFA86D876CCED88843CFA80ED6656F1521EB85D4AC699D2A5EE6B5FDEA5D7AE5F6AF76ED62EB3CABFBB3BA3FED1E6F93F44B4560B3E9AA833567FA23660D511B6236D36FAF365A35DA1DA9FFFDF2AA516CBD6CCC25A5F6F28563BC6486F9AB62FBB704D633235BE23AE8A2671AE827C6748535351CE80583E96F6CCC28EEB75A704D389D83541995E19E1E9F9C1ADF34FC77587F4FCA8075A2FEBF28F94EB57FB7722F7DB9F206DF9EAAD8976DE7CF24F69F48FC4D4896DFD6E17661D4F702B359F3FDE1E80B8235D8EFBDD0D631DC8FB4FF8136D8EDBDAC32983E23BABA20D87CF60E20ADEC7680F9A30CB2B06B80EE86D58F743E38F1FB2AE5657304ECCCF4B6397C67A677EF107F31B0D68A6F914D131EC072E4FE910A9D39935F3E177247CE6D8C77EF9973ECFCB9C5352F4BAF163CD26139D0268DB403A1BB1389BA96DF7845E2F4FF4295DAF454171E74030D9ABD3B31E11F059E6F16CDEB48C1368E742D45DA06DCDA43BF227BDADC7D9D03DB46995A2CEBEB30A476BF801153FBED11C6AAA48B0A42FF12896705B6022DD64CF85C14416B58542CB1CAA12258E9C979ACE89CF80AA77D9032FDB6EC81B044D773745730E1B7898A12855B46F7B10639A3437F93FE94066EDA3CBC8DD2AFB75E620B6826D597D52DFF90501694765FB554E435103AA7F21B599FA5D237F3625522DD08DE1128775F590A6610460CC1E42D9F9267D8C5B64F123EC282F8ABA2ED5B0FB2FD209A6E1F5E50B2884928738C4A1E3F620C07E1F2DDBFD2206F6B82270000 , N'6.1.3-40302')

END
GO